<?xml version="1.0" encoding="utf-8"?>
<androidx.drawerlayout.widget.DrawerLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/drawer_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true"
    tools:openDrawer="start">

    <!--
      PERUBAHAN PENTING:
      CoordinatorLayout jadi LinearLayout Vertikal.
      Toolbar ada di atas dan Konten ada di bawahnya (tidak numpuk).
    -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#F5F5F5"
        android:orientation="vertical">

        <!-- 1. HEADER / TOOLBAR -->
        <com.google.android.material.appbar.AppBarLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/white"
            app:elevation="4dp">

            <com.google.android.material.appbar.MaterialToolbar
                android:id="@+id/toolbar"
                android:layout_width="match_parent"
                android:layout_height="?attr/actionBarSize">

                <ImageView
                    android:id="@+id/img_logo"
                    android:layout_width="120dp"
                    android:layout_height="40dp"
                    android:layout_gravity="center"
                    android:src="@drawable/logo_toko_kue" />

                <com.google.android.material.imageview.ShapeableImageView
                    android:id="@+id/img_profile"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:layout_gravity="end"
                    android:layout_marginEnd="16dp"
                    android:padding="2dp"
                    android:src="@drawable/outline_account_box_24"
                    app:shapeAppearanceOverlay="@style/ShapeAppearance.Material3.SmallComponent"
                    app:strokeColor="#E0E0E0"
                    app:strokeWidth="1dp" />

            </com.google.android.material.appbar.MaterialToolbar>
        </com.google.android.material.appbar.AppBarLayout>

        <!-- 2. KONTEN UTAMA -->
        <!--
           layout_weight="1" agar mengisi sisa layar ke bawah.
           Hapus layout_behavior karena tidak perlu lagi di LinearLayout.
        -->
        <androidx.core.widget.NestedScrollView
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="12dp">

                <!-- KARTU GESER (CAROUSEL) -->
                <HorizontalScrollView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:clipToPadding="false"
                    android:paddingStart="4dp"
                    android:paddingEnd="4dp"
                    android:scrollbars="none">

                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">

                        <!-- Kartu 1: Revenue -->
                        <com.google.android.material.card.MaterialCardView
                            android:layout_width="160dp"
                            android:layout_height="wrap_content"
                            android:layout_margin="6dp"
                            app:cardCornerRadius="12dp"
                            app:cardElevation="3dp"
                            app:strokeColor="#F47B20"
                            app:strokeWidth="1dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:gravity="center"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Total Revenue"
                                    android:textColor="@android:color/black"
                                    android:textSize="14sp"
                                    android:textStyle="bold" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="8dp"
                                    android:background="@drawable/dashboard_summary_card_bg"
                                    android:paddingStart="16dp"
                                    android:paddingTop="6dp"
                                    android:paddingEnd="16dp"
                                    android:paddingBottom="6dp"
                                    android:text="8.98 Jt"
                                    android:textColor="@android:color/black"
                                    android:textSize="22sp"
                                    android:textStyle="bold" />
                            </LinearLayout>
                        </com.google.android.material.card.MaterialCardView>

                        <!-- Kartu 2: Profit -->
                        <com.google.android.material.card.MaterialCardView
                            android:layout_width="160dp"
                            android:layout_height="wrap_content"
                            android:layout_margin="6dp"
                            app:cardCornerRadius="12dp"
                            app:cardElevation="3dp"
                            app:strokeColor="#F47B20"
                            app:strokeWidth="1dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:gravity="center"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Total Profit"
                                    android:textColor="@android:color/black"
                                    android:textSize="14sp"
                                    android:textStyle="bold" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="8dp"
                                    android:background="@drawable/dashboard_summary_card_bg"
                                    android:paddingStart="16dp"
                                    android:paddingTop="6dp"
                                    android:paddingEnd="16dp"
                                    android:paddingBottom="6dp"
                                    android:text="4.50 Jt"
                                    android:textColor="@android:color/black"
                                    android:textSize="22sp"
                                    android:textStyle="bold" />
                            </LinearLayout>
                        </com.google.android.material.card.MaterialCardView>

                        <!-- Kartu 3: Expenses -->
                        <com.google.android.material.card.MaterialCardView
                            android:layout_width="160dp"
                            android:layout_height="wrap_content"
                            android:layout_margin="6dp"
                            app:cardCornerRadius="12dp"
                            app:cardElevation="3dp"
                            app:strokeColor="#F47B20"
                            app:strokeWidth="1dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:gravity="center"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Expenses"
                                    android:textColor="@android:color/black"
                                    android:textSize="14sp"
                                    android:textStyle="bold" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="8dp"
                                    android:background="@drawable/dashboard_summary_card_bg"
                                    android:paddingStart="16dp"
                                    android:paddingTop="6dp"
                                    android:paddingEnd="16dp"
                                    android:paddingBottom="6dp"
                                    android:text="2.10 Jt"
                                    android:textColor="@android:color/holo_red_dark"
                                    android:textSize="22sp"
                                    android:textStyle="bold" />
                            </LinearLayout>
                        </com.google.android.material.card.MaterialCardView>

                        <!-- Kartu 4: Net Income -->
                        <com.google.android.material.card.MaterialCardView
                            android:layout_width="160dp"
                            android:layout_height="wrap_content"
                            android:layout_margin="6dp"
                            app:cardCornerRadius="12dp"
                            app:cardElevation="3dp"
                            app:strokeColor="#F47B20"
                            app:strokeWidth="1dp">

                            <LinearLayout
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:gravity="center"
                                android:orientation="vertical"
                                android:padding="16dp">

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="Net Income"
                                    android:textColor="@android:color/black"
                                    android:textSize="14sp"
                                    android:textStyle="bold" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:layout_marginTop="8dp"
                                    android:background="@drawable/dashboard_summary_card_bg"
                                    android:paddingStart="16dp"
                                    android:paddingTop="6dp"
                                    android:paddingEnd="16dp"
                                    android:paddingBottom="6dp"
                                    android:text="2.40 Jt"
                                    android:textColor="#4CAF50"
                                    android:textSize="22sp"
                                    android:textStyle="bold" />
                            </LinearLayout>
                        </com.google.android.material.card.MaterialCardView>

                    </LinearLayout>
                </HorizontalScrollView>

                <!-- GRAFIK -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="16dp"
                    android:baselineAligned="false"
                    android:orientation="horizontal">

                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_margin="4dp"
                        android:layout_weight="1"
                        app:cardCornerRadius="12dp"
                        app:cardElevation="2dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="16dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Profit and Loss"
                                android:textColor="@android:color/black"
                                android:textSize="16sp"
                                android:textStyle="bold" />

                            <ImageView
                                android:id="@+id/chart_line"
                                android:layout_width="match_parent"
                                android:layout_height="150dp"
                                android:layout_marginTop="8dp"
                                android:contentDescription="Placeholder untuk Line Chart"
                                android:scaleType="fitXY" />
                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>

                    <com.google.android.material.card.MaterialCardView
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_margin="4dp"
                        android:layout_weight="1"
                        app:cardCornerRadius="12dp"
                        app:cardElevation="2dp">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:gravity="center_horizontal"
                            android:orientation="vertical"
                            android:padding="16dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Branch Perform..."
                                android:textColor="@android:color/black"
                                android:textSize="16sp"
                                android:textStyle="bold" />

                            <ImageView
                                android:id="@+id/chart_pie"
                                android:layout_width="120dp"
                                android:layout_height="120dp"
                                android:layout_marginTop="8dp"
                                android:contentDescription="Placeholder untuk Pie Chart"
                                android:src="@drawable/outline_insert_chart_24" />
                        </LinearLayout>
                    </com.google.android.material.card.MaterialCardView>
                </LinearLayout>

                <!-- TABEL PRODUK -->
                <com.google.android.material.card.MaterialCardView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_margin="4dp"
                    android:layout_marginTop="16dp"
                    app:cardCornerRadius="12dp"
                    app:cardElevation="2dp">

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical"
                        android:padding="16dp">

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="12dp"
                            android:text="Top Selling Product"
                            android:textColor="@android:color/black"
                            android:textSize="18sp"
                            android:textStyle="bold" />

                        <TableLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content">

                            <TableRow
                                android:background="@drawable/dashboard_table_header_bg"
                                android:padding="8dp">

                                <TextView
                                    android:layout_width="0dp"
                                    android:layout_weight="2"
                                    android:text="Products"
                                    android:textColor="@android:color/darker_gray"
                                    android:textStyle="bold" />

                                <TextView
                                    android:layout_width="0dp"
                                    android:layout_weight="1"
                                    android:gravity="end"
                                    android:text="Qty Sold"
                                    android:textColor="@android:color/darker_gray"
                                    android:textStyle="bold" />

                                <TextView
                                    android:layout_width="0dp"
                                    android:layout_weight="1.5"
                                    android:gravity="end"
                                    android:text="Revenue"
                                    android:textColor="@android:color/darker_gray"
                                    android:textStyle="bold" />
                            </TableRow>

                            <TableRow android:padding="8dp">
                                <TextView
                                    android:layout_weight="2"
                                    android:text="Chiffon Uk 15 Ori"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1"
                                    android:gravity="end"
                                    android:text="1200"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1.5"
                                    android:gravity="end"
                                    android:text="4.500.000"
                                    android:textColor="@android:color/black" />
                            </TableRow>

                            <View
                                android:layout_height="1dp"
                                android:background="#F0F0F0" />

                            <TableRow android:padding="8dp">
                                <TextView
                                    android:layout_weight="2"
                                    android:text="Brownies"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1"
                                    android:gravity="end"
                                    android:text="1198"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1.5"
                                    android:gravity="end"
                                    android:text="4.378.000"
                                    android:textColor="@android:color/black" />
                            </TableRow>

                            <View
                                android:layout_height="1dp"
                                android:background="#F0F0F0" />

                            <TableRow android:padding="8dp">
                                <TextView
                                    android:layout_weight="2"
                                    android:text="Bolu Kotak"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1"
                                    android:gravity="end"
                                    android:text="1150"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1.5"
                                    android:gravity="end"
                                    android:text="4.250.000"
                                    android:textColor="@android:color/black" />
                            </TableRow>
                            <View
                                android:layout_height="1dp"
                                android:background="#F0F0F0" />

                            <TableRow android:padding="8dp">
                                <TextView
                                    android:layout_weight="2"
                                    android:text="Lapis Mandarin"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1"
                                    android:gravity="end"
                                    android:text="987"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1.5"
                                    android:gravity="end"
                                    android:text="3.700.000"
                                    android:textColor="@android:color/black" />
                            </TableRow>
                            <View
                                android:layout_height="1dp"
                                android:background="#F0F0F0" />

                            <TableRow android:padding="8dp">
                                <TextView
                                    android:layout_weight="2"
                                    android:text="Chiffon Uk 18 Extra"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1"
                                    android:gravity="end"
                                    android:text="843"
                                    android:textColor="@android:color/black" />
                                <TextView
                                    android:layout_weight="1.5"
                                    android:gravity="end"
                                    android:text="2.900.000"
                                    android:textColor="@android:color/black" />
                            </TableRow>

                        </TableLayout>
                    </LinearLayout>
                </com.google.android.material.card.MaterialCardView>

                <!-- FOOTER -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="16dp"
                    android:background="#333333"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Chiffon Krumpul Wonosari"
                        android:textColor="@android:color/white"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="8dp"
                        android:lineSpacingExtra="4dp"
                        android:text="Chiffon Krumpul Wonosari adalah salah satu produk unggulan dari Roti Wonosari, sebuah toko roti lokal yang berada di Wonosari, Gunungkidul. Produk ini berupa bolu chiffon dengan tekstur lembut dan ringan khas kue Chiffon dengan cita rasa yang sesuai dengan selera lokal."
                        android:textColor="#E0E0E0"
                        android:textSize="12sp" />

                    <View
                        android:layout_width="match_parent"
                        android:layout_height="1dp"
                        android:layout_marginTop="16dp"
                        android:layout_marginBottom="16dp"
                        android:background="#555555" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Hallo Chief - Layanan Pelanggan"
                        android:textColor="@android:color/white"
                        android:textStyle="bold" />
                </LinearLayout>

            </LinearLayout>
        </androidx.core.widget.NestedScrollView>
    </LinearLayout>

    <!-- 3. Sidebar (Navigation View) - WAJIB PALING BAWAH -->
    <com.google.android.material.navigation.NavigationView
        android:id="@+id/nav_view"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_gravity="start"
        app:headerLayout="@layout/nav_header"
        app:menu="@menu/drawer_menu" />

</androidx.drawerlayout.widget.DrawerLayout>